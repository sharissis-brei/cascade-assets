var chapman=chapman||{};$(function(){"use strict";chapman.main.init(),chapman.previousResults.init(),chapman.results.init(),chapman.socialShare.init(),chapman.geolocate.init()}),function(){"use strict";chapman.main={$elem:{},$activePanel:null,init:function(){$("#main-menu").brei_popover(),$(".banner-panel").addClass("transition"),this.unveil()},unveil:function(){$(".unveil").unveil(0,function(){$(this).load(function(){cu_hero_area.adjustSize(),$(this).addClass("unveiled")})})}}}(),$(document).ready(function(){cu_window_manager.initialize(),cu_hero_area.initialize()});var cu_window_manager={resizerLatency:100,useTransitions:!0,cannotAutoplayVideo:!1,videoEnabled:!1,resizeTimeout:100,initialize:function(){for(var a=0,b=!1,c=["iPad","iPhone","iPod","iPhone Simulator"],a=0;a<c.length;a++)if(navigator.platform===c[a]){b=!0;break}var d=navigator.userAgent.toLowerCase(),e=d.indexOf("android")>-1;e||b?(cu_window_manager.cannotAutoplayVideo=!0,cu_window_manager.useTransitions=!0):cu_window_manager.videoEnabled=!0,window.addEventListener?window.addEventListener("resize",cu_window_manager.resizer,!1):window.attachEvent&&window.attachEvent("onresize",cu_window_manager.resizer)},resizer:function(){null!=cu_window_manager.resizeTimeout&&clearTimeout(cu_window_manager.resizeTimeout),cu_window_manager.resizeTimeout=setTimeout(function(){cu_window_manager.resizeTimeout=null,cu_hero_area.adjustSize()},cu_window_manager.resizerLatency)}},cu_hero_area={videoTransitionTimeout:null,$mastheadVideo:null,$mastheadImage:null,$mastheadBackground:null,$mastheadGradient:null,videoPlayer:null,initialize:function(){cu_hero_area.$mastheadVideo=$("#mastheadVideo"),cu_hero_area.$mastheadImage=$("#mastheadImage"),cu_hero_area.$mastheadBackground=$("#mastheadBackground"),cu_hero_area.$mastheadGradient=$("#mastheadGradient"),cu_hero_area.setupContent($("#hero"))},adjustSize:function(){var a=cu_hero_area.$mastheadBackground.outerWidth(),b=cu_hero_area.$mastheadBackground.outerHeight();if(cu_window_manager.videoEnabled&&cu_hero_area.videoPlayer){cu_hero_area.$mastheadImage.remove();var c=b/cu_hero_area.videoPlayer.videoHeight,d=a/cu_hero_area.videoPlayer.videoWidth,e=c>d?c:d,f=e*cu_hero_area.videoPlayer.videoWidth,g=e*cu_hero_area.videoPlayer.videoHeight;cu_hero_area.$mastheadVideo.width(f).height(g),cu_hero_area.$mastheadBackground.scrollLeft((f-a)/2).scrollTop((g-b)/2)}else{var c=b/cu_hero_area.$mastheadImage.height(),d=a/cu_hero_area.$mastheadImage.width(),e=c>d?c:d,f=e*cu_hero_area.$mastheadImage.width(),g=e*cu_hero_area.$mastheadImage.height();cu_hero_area.$mastheadImage.width(f).height(g),cu_hero_area.$mastheadBackground.scrollLeft((f-a)/2).scrollTop((g-b)/2)}},setupContent:function(a){null!=cu_hero_area.videoTransitionTimeout&&clearTimeout(cu_hero_area.videoTransitionTimeout),cu_hero_area.videoPlayer=a.find("#mastheadVideo")[0],cu_hero_area.videoPlayer&&!cu_window_manager.cannotAutoplayVideo&&cu_hero_area.videoPlayer.addEventListener?(cu_hero_area.videoPlayer.muted=!0,cu_hero_area.videoPlayer.addEventListener("canplay",function(){setTimeout(function(){a.addClass("video-playing"),cu_hero_area.videoPlayer.play(),cu_hero_area.adjustSize()},1e3)}),cu_hero_area.adjustSize()):(a.removeClass("video-playing"),cu_hero_area.adjustSize())}},chapman=chapman||{};!function(){"use strict";chapman.previousResults={isOpen:!1,loadCurr:0,loadUrls:[],$cookie:null,$container:null,$clearBtn:null,$loadedSlides:[],$sliderList:null,$slider:null,$sliderToggleContainer:null,$sliderStatusContainer:null,$toggleBtn:null,medium:"only screen and (min-width: 47em) and (max-width: 67.5em)",large:"only screen and (min-width: 67.5em)",sliderCount:0,initialized:!1,init:function(){this.$cookie=$.cookie("previousResults"),this.$container=$("#previous-result"),this.$sliderList=$("#previous-result-list"),this.$sliderToggleContainer=$("#previous-result-toggle-container").addClass("is-ready"),this.$sliderStatusContainer=$("#previous-result-slider-status"),this.$toggleBtn=$("#previous-result-toggle-btn").on("click",function(a){chapman.previousResults.toggle(),a.preventDefault()}),this.$clearBtn=$("#clear-all-btn").on("click",function(a){chapman.previousResults.clearResults(),a.preventDefault()}),this.addPreviousResult(),this.loadPreviousResults()},toggle:function(){this.isOpen=this.isOpen===!1?!0:!1,this.isOpen?$(".container",this.$toggleBtn).removeClass("icon-arrow-circle-down").addClass("icon-arrow-circle-up"):$(".container",this.$toggleBtn).removeClass("icon-arrow-circle-up").addClass("icon-arrow-circle-down"),setTimeout(function(){chapman.main.unveil()},500),this.$sliderToggleContainer.slideToggle()},decide:function(){var a=1,b=this,c=this.$sliderToggleContainer,d=this.initialized;Modernizr.mq(this.medium)&&(a=3),Modernizr.mq(this.large)&&(a=4);var e={hideControlOnEnd:!0,infiniteLoop:!1,minSlides:a,maxSlides:a,moveSlides:1,pager:!1,slideWidth:232,slideMargin:20,useCSS:!0,onSliderLoad:function(e){b.updateSliderControls(e,a),b.updateStatus(e),d||(c.hide(),c.addClass("is-rendered").removeClass("is-generating").removeClass("is-loading"),b.$toggleBtn.addClass("is-rendered"))},onSlideBefore:function(c,d,e){b.updateSliderControls(e,a),b.updateStatus(e)}};b.createSlider(e)},createSlider:function(a){this.$sliderToggleContainer.show(),null!==this.$slider?this.$slider.reloadSlider(a):this.$slider=this.$sliderList.bxSlider(a),this.isOpen===!1&&this.initialized===!0&&this.$sliderToggleContainer.hide(),this.initialized=!0},updateStatus:function(a){this.$sliderStatusContainer.text(String(a+1+" of "+this.sliderCount))},updateSliderControls:function(a,b){null!==this.$slider?(this.sliderCount=this.$slider.getSlideCount(),0===a&&$("#previous-result-slider-prev").addClass("is-inactive"),a>0&&$("#previous-result-slider-prev").removeClass("is-inactive"),a<this.sliderCount-b&&$("#previous-result-slider-next").removeClass("is-inactive"),a>=this.sliderCount-b&&$("#previous-result-slider-next").addClass("is-inactive")):$("#previous-result-slider-prev").addClass("is-inactive")},loadPreviousResults:function(){var a=this.$cookie;a&&0===this.loadCurr?this.loadUrls=a.split(","):this.$toggleBtn.addClass("is-rendered");var b=this;this.loadCurr<=this.loadUrls.length&&this.loadUrls.length>0&&(this.$sliderToggleContainer.addClass("is-loading"),$.get(this.loadUrls[b.loadCurr],function(a){var c=$("<div>").html(a);b.$sliderList.prepend(c.find("#result-list li")),b.loadCurr+=1,b.sliderCount=b.$sliderList.children().size(),b.$toggleBtn.find(".count").html("("+b.sliderCount+")"),b.loadCurr<b.loadUrls.length?b.loadPreviousResults():b.finishedLoading()}).fail(function(){b.$sliderToggleContainer.removeClass("is-loading")}))},finishedLoading:function(){this.$sliderToggleContainer.addClass("is-generating"),mediaCheck({media:this.medium,both:function(){chapman.previousResults.decide()}})},addPreviousResult:function(){var a=window.location.pathname,b=this.$cookie;if(-1===a.indexOf("modules")&&$("#result-list").length>0){var c;null!==b?-1===b.indexOf(a)&&(c=b+","+a):c=a,null!==c&&$.cookie("previousResults",c,{path:"/"})}},clearResults:function(){var a=this;$.removeCookie("previousResults",{path:"/"}),setTimeout(function(){a.$toggleBtn.find(".count").html("(0)").trigger("click"),a.$sliderList.empty(),a.$sliderToggleContainer.addClass("is-reset")},1e3)}}}();var chapman=chapman||{};!function(){"use strict";chapman.results={$elem:{},init:function(){this.fancybox()},fancybox:function(){Modernizr.mq("only screen and (min-width: 47em)")&&$(".fancybox").fancybox({helpers:{media:{}}})}}}();var chapman=chapman||{};!function(){"use strict";chapman.socialShare={init:function(){$("#share-on-twitter").click(function(a){var b=$("h1").text(),c="",d=a.currentTarget+"?text="+encodeURIComponent(b)+"&hashtags="+c;return chapman.socialShare.openWindow(450,550,d),!1}),$("#share-on-dacebook").click(function(a){var b=$("h1").text(),c="http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location.href)+"&t="+encodeURIComponent(b);return chapman.socialShare.openWindow(450,300,c),!1})},openWindow:function(a,b,c){var d,e;d=window.screen.width/2-(a/2+10),e=window.screen.height/2-(b/2+50);var f="status=no,height="+b+",width="+a+",resizable=yes,left="+d+",top="+e+",screenX="+d+",screenY="+e+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";window.open(c,"socialshare",f)}}}();var chapman=chapman||{};!function(){"use strict";chapman.geolocate={xmlPath:"/discover/geolocationData.xml",config:null,regionName:"",countryCode:"",$copyContainer:null,init:function(){$("body").hasClass("lt-ie9")||(this.$copyContainer=$("#geolocate-copy"),this.$copyContainer.length>0&&this.loadGeolocationData())},setContent:function(){var a=$("#geolocate-copy"),b=$(this.config).find("regionName:contains("+this.regionName+")").parent().find("copy")[0];void 0!==b?a.html(b.cloneNode(!0)).addClass("is-loaded"):a.html(""),cu_hero_area.adjustSize()},loaded:function(){null===this.config?this.loadConfig():this.setContent()},loadGeolocationData:function(){var a=this;$.getJSON("//api.ipinfodb.com/v3/ip-city/?callback=?",{key:"d5b307ab7d104437beedaf0b7eaed1f89ac66389b9f64a0fe938a9a4f1eb42a0",format:"json"},function(b){try{a.regionName=b.regionName.toLowerCase(),a.countryCode=b.countryCode.toLowerCase(),a.loaded()}catch(c){console&&console.error("Error from data source: "+c)}})},loadConfig:function(){var a=this;$.ajax({url:this.xmlPath,dataType:"xml",success:function(b){a.config=b,a.loaded()}})}}}();